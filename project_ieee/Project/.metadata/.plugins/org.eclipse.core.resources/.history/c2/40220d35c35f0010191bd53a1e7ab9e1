/*
 * main.c
 *
 *  Created on: Dec 6, 2024
 *      Author: s
 */

#include "main.h"

volatile uint8_t speed = 0;
volatile uint16_t distance = 0;
volatile uint8 acc_enabled = 1;

int main (void) {
	ADC_vidInit();
	LCD_vidInit();
	LCD_vidWriteStr("speed:");
	LCD_vidGoto(2, 0);
	LCD_vidWriteStr("distance:");

	while(1) {
		speed = (ADC_u16ReadDigitalVal(ADC_CHANNEL1) * 100) / 1023;
		distance = Ultrasonic_readDistance();
		LCD_vidGoto(1, 9);
		LCD_vidWriteInt(speed);
		LCD_vidGoto(1, 13);
		LCD_vidWriteStr("km/h");
		LCD_vidGoto(2, 10);
		LCD_vidWriteInt(distance);
		LCD_vidGoto(2, 13);
		LCD_vidWriteStr("cm");

	}
	return 0;
}

ISR(INT0_vec) {
	acc_enabled ^= 1;
}
